<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">

	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
	Remove this if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Wits Research Publication Archive</title>
	<meta name="description" content="">
	<meta name="author" content="Wits-Epsilon">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="/css/bootswatch-yeti.min.css"> -->
	<link rel="stylesheet" type="text/css" href="/css/index.css">

</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<a href="/#!/" class="navbar-brand">Wits Research Repository
					<small>by Wits-Epsilon</small>
				</a>
			</div>
			<form class="input-group navbar-right nav-search-input-group" submit="{{onSearchClick}}">
				<input type="text" class="form-control" placeholder="Search" textInput="{{search}}">
				<span class="input-group-btn">
					<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
				</span>
			</form>
		</div>
		<div class="row" >
			<div id="adv-search-link" class="input-group navbar-right nav-search-input-group"><a style="width: 350px" href="#!/advancedSearch">Advanced Search</a></div>
		</div>
	</nav>

	<div class="container-fluid">
		<div class="col-md-10 col-sm-9">

			<div class="row" data-bind="page: {id: 'publicationDetails', params: ['pubId'], title: 'Publication Details', sourceOnShow: 'views/publicationDetails.html', withOnShow: getVM('publicationDetails')}">
			</div>
			<!-- ko if: loginState() !== 'unregistered' -->
			<div class="row" data-bind="page: {id: 'publicationUpload', title: 'Publication Upload', sourceOnShow: 'views/publicationUpload.html', withOnShow: getVM('publicationUpload')}">
			</div>
			<div class="row" data-bind="page: {id: 'viewAccount', title: 'View Account', sourceOnShow: 'views/viewAccount.html', withOnShow: getVM('viewAccount')}">
			</div>
			<!-- /ko -->
			<!-- ko if: loginState() === 'admin' -->
			<div class="row" data-bind="page: {id: 'createAccount', title: 'Create Account', sourceOnShow: 'views/createAccount.html', withOnShow: getVM('createAccount')}">
			</div>
			<div class="row" data-bind="page: {id: 'uploadListings', title: 'Upload Listings', sourceOnShow: 'views/uploadListings.html', withOnShow: getVM('uploadListings')}"></div>
			<!-- /ko -->

			<div class="row" data-bind="page: {role: 'start', id: 'publications', title: 'All publications', params:{'search' : '', 'page': 1, 'pageSize':20, sort: 'ASC', sortBy: 'Title'}, sourceOnShow: 'views/publications.html', withOnShow: getVM('publications')}">
			</div>

			<div class="row" data-bind="page: {id: 'advancedSearch', title: 'Advanced Search', sourceOnShow: 'views/advancedSearch.html', withOnShow: getVM('advancedSearch')}"></div>

		</div>

		<div class="col-md-2 col-md-offset-10 col-sm-3 col-sm-offset-9 sidebar">
			<ul class="nav nav-sidebar">
				<!-- ko if: loginState() === 'unregistered' -->
				<li class="active"><a href="#" data-bind="click: loginModal" >Login</a></li>
				<!-- /ko -->
				<!-- ko if: loginState() !== 'unregistered'  -->
				<li class="active"><a href="#" data-bind="click: logout" >Logout</a></li>
				<li class="inactive"><a><span data-bind="text: loginUsername"></span> (<span data-bind="text: loginState"></span>)</a></li>
				<li class="active"><a href="#!/publicationUpload">Upload</a></li>
				<li class="active"><a href="#!/viewAccount">View Account</a></li>
				<!-- /ko -->
				<!-- ko if: loginState() === 'admin' -->
				<li class="active"><a href="#!/createAccount">Create Account</a></li>
				<li class="active"><a href="#!/uploadListings">Update Journal Listings</a></li>
				<!-- /ko -->
			</ul>
			<ul class="nav nav-sidebar">
			</ul>
			<ul class="nav nav-sidebar">
			</ul>
		</div>

	</div>

	<!-- Scripts -->
	<script type="text/javascript" src="/js/require.js"></script>
	<script type="text/javascript" src="/js/ko/index.js"></script>
</body>
</html>
